(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(22),s=n.n(c),i=(n(30),n(16)),o=n(3),u=n(4),l=n(6),d=n(5),j=n(13),b=n(2),h=n.n(b),m=n(8),p=n(15),f=(n(32),n(0)),O=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"loading",children:Object(f.jsx)("div",{className:"load"})})}}]),n}(a.Component),v=O,x="user",g=function(e){return localStorage.setItem(x,JSON.stringify(e))},k=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},S=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(x));null===t&&(t={}),k(t)(e)}))},N=function(e){return new Promise((function(t){g(Object(i.a)(Object(i.a)({},{name:"",email:"",image:"",description:""}),e)),k("OK")(t)}))},y=function(e){return new Promise((function(t){g(Object(i.a)({},e)),k("OK")(t)}))},w=(n(34),n.p+"static/media/logo.9c05888d.svg"),C=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleInputChange=function(t){var n,a=t.target,r=a.name,c=a.value,s=c.length<3;e.setState((n={},Object(p.a)(n,r,c),Object(p.a)(n,"iSbuttonDisabled",s),n))},e.fetchCreateUSer=Object(m.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.name,e.setState({messageLoading:!0}),t.next=4,N({name:n});case 4:e.setState({messageLoading:!1,redirectCondition:!0});case 5:case"end":return t.stop()}}),t)}))),e.state={name:"",iSbuttonDisabled:!0,messageLoading:!1,redirectCondition:!1},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.iSbuttonDisabled,a=e.messageLoading,r=e.redirectCondition;return Object(f.jsxs)("div",{"data-testid":"page-login",className:"login-container",children:[r&&Object(f.jsx)(j.Redirect,{to:"/search"}),a?Object(f.jsx)(v,{}):Object(f.jsxs)(f.Fragment,{children:[" ",Object(f.jsx)("img",{src:w,className:"logo-image",alt:"logo.svg"}),Object(f.jsxs)("form",{children:[Object(f.jsxs)("label",{children:["Usu\xe1rio",Object(f.jsx)("input",{type:"text",value:t,name:"name","data-testid":"login-name-input",onChange:this.handleInputChange,placeholder:"Ex pedro",className:"input-user"})]}),Object(f.jsx)("button",{type:"button",disabled:n,onClick:this.fetchCreateUSer,"data-testid":"login-submit-button",className:"login-btn",children:"Entrar"})]})]})]})}}]),n}(a.Component),I=n(14),D=(n(43),n.p+"static/media/headerLogo.806a1a7d.svg"),F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).findName=Object(m.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,S();case 3:n=t.sent,e.setState({Username:n.name,image:n.image,loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.state={loading:!1,Username:"",image:""},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.findName()}},{key:"render",value:function(){var e=this.state,t=e.Username,n=e.image,a=void 0===n?{}:n;return Object(f.jsxs)("header",{"data-testid":"header-component",children:[Object(f.jsxs)("div",{className:"first-header","data-testid":"header-user-name",children:[Object(f.jsx)("img",{src:D,className:"header-logo",alt:"logo"}),Object(f.jsxs)("div",{className:"container-user",children:[Object(f.jsx)("img",{src:a,className:"img-perfil",alt:""}),t]})]}),Object(f.jsx)("nav",{children:Object(f.jsxs)("ul",{className:"header-link",children:[Object(f.jsx)("li",{children:Object(f.jsxs)(I.a,{to:"/favorites","data-testid":"link-to-favorites",children:[" ","Favorites"]})}),Object(f.jsx)("li",{children:Object(f.jsxs)(I.a,{to:"/search","data-testid":"link-to-search",children:[" ","Search"]})}),Object(f.jsx)("li",{children:Object(f.jsxs)(I.a,{to:"/profile","data-testid":"link-to-profile",children:[" ","Profile"]})})]})})]})}}]),n}(a.Component),U=function(){var e=Object(m.a)(h.a.mark((function e(t){var n,a,r,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=U,R=(n(44),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleInputChange=function(t){var n,a=t.target,r=a.name,c=a.value,s=c.length<2;e.setState((n={},Object(p.a)(n,r,c),Object(p.a)(n,"iSbuttonDisabled",s),Object(p.a)(n,"SearchEnd",!1),n))},e.handleSubmit=Object(m.a)(h.a.mark((function t(){var n,a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.artistName,a=n,e.setState({loading:!0}),t.next=5,P(n);case 5:r=t.sent,e.setState({SearchName:a,SearchEnd:!0,artistName:"",albuns:r,loading:!1});case 7:case"end":return t.stop()}}),t)}))),e.state={artistName:"",iSbuttonDisabled:!0,albuns:[],loading:!1,SearchEnd:!1,SearchName:""},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.iSbuttonDisabled,n=e.artistName,a=e.albuns,r=e.loading,c=e.SearchEnd,s=e.SearchName;return Object(f.jsxs)("div",{"data-testid":"page-search",children:[Object(f.jsx)(F,{}),Object(f.jsxs)("div",{className:"search-container",children:[Object(f.jsx)("input",{name:"artistName",type:"text","data-testid":"search-artist-input",value:n,onChange:this.handleInputChange,placeholder:"Digite o nome De um cantor ex: Thiaguinho"}),Object(f.jsx)("button",{"data-testid":"search-artist-button",type:"submit",disabled:t,onClick:this.handleSubmit,children:"Procurar"})]}),Object(f.jsxs)("div",{children:[c&&a.length>0&&Object(f.jsxs)("p",{className:"text-result",children:["Resultado de \xe1lbuns de:"," ",Object(f.jsx)("span",{className:"search-Name",children:s})]}),c&&a.length<1&&Object(f.jsx)("p",{className:"text-result",children:"Nenhum \xe1lbum foi encontrado"}),r?Object(f.jsx)(v,{}):Object(f.jsx)("ul",{className:"album-container",children:a.map((function(e){var t=e.collectionId,n=e.collectionName,a=e.artworkUrl100;return Object(f.jsx)("li",{children:Object(f.jsxs)(I.a,{"data-testid":"link-to-album-".concat(t),to:"/album/".concat(t),children:[Object(f.jsx)("img",{src:a,alt:n}),Object(f.jsx)("p",{className:"album-name",children:n})]})},t)}))})]})]})}}]),n}(a.Component)),M=function(){var e=Object(m.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=M,J=(n(45),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.track,n=t.trackId,a=t.trackName,r=t.previewUrl,c=e.track,s=e.handleFavorite,i=e.favorite;return Object(f.jsxs)("div",{className:"card-container",children:[Object(f.jsx)("span",{children:a}),Object(f.jsxs)("audio",{"data-testid":"audio-component",src:r,controls:!0,children:[Object(f.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(f.jsx)("code",{children:"audio"}),"."]}),Object(f.jsxs)("label",{htmlFor:n,children:[Object(f.jsx)("input",{"data-testid":"checkbox-music-".concat(n),type:"checkbox",id:n,onChange:function(e){var t=e.target.checked;return s(c,t)},checked:i}),"Favorita"]})]})}}]),n}(a.Component)),L=J,T=n(25),A="favorite_songs";JSON.parse(localStorage.getItem(A))||localStorage.setItem(A,JSON.stringify([]));var K=function(){return JSON.parse(localStorage.getItem(A))},B=function(e){return localStorage.setItem(A,JSON.stringify(e))},G=function(e){return function(t){setTimeout((function(){t(e)}),500)}},$=function(){return new Promise((function(e){var t=K();G(t)(e)}))},_=function(e){return new Promise((function(t){if(e){var n=K();B([].concat(Object(T.a)(n),[e]))}G("OK")(t)}))},q=function(e){return new Promise((function(t){var n=K();B(n.filter((function(t){return t.trackId!==e.trackId}))),G("OK")(t)}))},z=(n(46),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).handleFavorite=function(){var t=Object(m.a)(h.a.mark((function t(n,a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0}),!a){t.next=4;break}return t.next=4,_(n);case 4:if(a){t.next=7;break}return t.next=7,q(n);case 7:return t.next=9,$();case 9:r=t.sent,e.setState({loading:!1,favoritesSongs:r});case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.fetchALbumMusics=Object(m.a)(h.a.mark((function t(){var n,a,r,c,s,i,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.id,t.next=3,E(n);case 3:return a=t.sent,r=a[0],c=r.artistName,s=r.collectionName,i=r.artworkUrl100,t.next=7,$();case 7:o=t.sent,e.setState({songs:a.slice(1),artistName:c,collectionName:s,artworkUrl100:i,favoritesSongs:o});case 9:case"end":return t.stop()}}),t)}))),e.isFavorite=function(t){return e.state.favoritesSongs.some((function(e){return e.trackId===t}))},e.state={songs:[],artistName:"",collectionName:"",artworkUrl100:"",loading:!1,favoritesSongs:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.fetchALbumMusics()}},{key:"render",value:function(){var e=this,t=this.state,n=t.artistName,a=t.collectionName,r=t.artworkUrl100,c=t.songs,s=t.loading;return Object(f.jsxs)("div",{"data-testid":"page-album",children:[Object(f.jsx)(F,{}),Object(f.jsx)("main",{className:"album-musics",children:s?Object(f.jsx)(v,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"album-image",children:[Object(f.jsx)("img",{src:r,alt:a}),Object(f.jsx)("p",{"data-testid":"artist-name",children:n}),Object(f.jsx)("p",{"data-testid":"album-name",children:a})]}),Object(f.jsx)("div",{className:"tracks-container",children:c.map((function(t){return Object(f.jsx)(L,{handleFavorite:e.handleFavorite,track:t,favorite:e.isFavorite(t.trackId)},t.trackId)}))})]})})]})}}]),n}(a.Component)),H=z,Q=(n(47),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getFavoritesMusicsState=Object(m.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,$();case 3:n=t.sent,e.setState({loading:!1,favoritesSongs:n});case 5:case"end":return t.stop()}}),t)}))),e.handleFavorite=function(){var t=Object(m.a)(h.a.mark((function t(n,a){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0}),a){t.next=4;break}return t.next=4,q(n);case 4:return t.next=6,$();case 6:r=t.sent,e.setState({loading:!1,favoritesSongs:r});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.isFavorite=function(t){return e.state.favoritesSongs.some((function(e){return e.trackId===t}))},e.state={favoritesSongs:[],loading:!1},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getFavoritesMusicsState()}},{key:"render",value:function(){var e=this,t=this.state,n=t.favoritesSongs,a=t.loading;return Object(f.jsxs)("div",{"data-testid":"page-favorites",children:[Object(f.jsx)(F,{}),Object(f.jsxs)("main",{children:[Object(f.jsx)("h2",{className:"favorites-title",children:"M\xfasicas favoritas:"}),a&&Object(f.jsx)(v,{}),Object(f.jsx)("div",{className:"card-musics",children:n.map((function(t){return Object(f.jsx)(L,{handleFavorite:e.handleFavorite,track:t,favorite:e.isFavorite(t.trackId)},t.trackId)}))})]})]})}}]),n}(a.Component)),V=Q,W=n(7),X=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.value,a=e.callback,r=e.type,c=e.testid,s=e.dica;return Object(f.jsxs)("label",{htmlFor:t,children:[t,Object(f.jsx)("input",{type:r,name:t,id:t,value:n,"data-testid":c,onChange:a,placeholder:s})]})}}]),n}(a.Component),Y=X,Z=(n(48),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).GetUserStorage=Object(m.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,S();case 3:n=t.sent,e.setState({loading:!1,user:n},(function(){return e.setState({buttonDisabled:e.veryfyInputs()})}));case 5:case"end":return t.stop()}}),t)}))),e.handleInputChange=function(t){var n=t.target,a=e.state.user,r=n.name,c=n.value;a[r]=c;var s=e.veryfyInputs();e.setState({user:a,buttonDisabled:s})},e.onUpdtateClick=function(){var t=Object(m.a)(h.a.mark((function t(n){var a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.history,n.preventDefault(),r=e.state.user,t.next=5,y(r);case 5:a.push("/profile");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.veryfyInputs=function(){var t=e.state.user,n=t.name,a=t.email,r=0;[n,a,t.description,t.image].every((function(e){return e.length>1}))&&(r+=1),/^\S+@\S+\.\S+$/.test(a)&&(r+=1);return 2!==r},e.state={user:{},loading:!1,buttonDisabled:!0,redirect:!1},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.GetUserStorage()}},{key:"render",value:function(){var e=this.state,t=e.user,n=t.name,a=t.email,r=t.image,c=t.description,s=e.loading,i=e.buttonDisabled,o=e.redirect;return Object(f.jsxs)(f.Fragment,{children:[o&&Object(f.jsx)(W.Redirect,{to:"/profile"}),Object(f.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(f.jsx)(F,{}),Object(f.jsx)("main",{children:s?Object(f.jsx)(v,{}):Object(f.jsxs)("form",{className:"edit-infos",children:[Object(f.jsx)(Y,{name:"name",type:"text",testid:"edit-input-name",value:n,callback:this.handleInputChange,dica:"ex Pedro"}),Object(f.jsx)(Y,{name:"email",type:"text",testid:"edit-input-email",value:a,callback:this.handleInputChange,dica:"ex Pedro@gmail.com"}),Object(f.jsx)(Y,{name:"description",type:"text",testid:"edit-input-description",value:c,callback:this.handleInputChange,dica:"Tenho 25 anos, adoro pagode..."}),Object(f.jsx)(Y,{name:"image",type:"text",testid:"edit-input-image",value:r,callback:this.handleInputChange,dica:"insira uma url de imagem"}),Object(f.jsx)("button",{type:"submit","data-testid":"edit-button-save",disabled:i,onClick:this.onUpdtateClick,children:"Editar perfil"})]})})]})]})}}]),n}(a.Component)),ee=Z,te=(n(49),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getInfos=Object(m.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,S();case 3:n=t.sent,e.setState({loading:!1,user:n});case 5:case"end":return t.stop()}}),t)}))),e.state={loading:!1,user:{}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getInfos()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.user,a=n.description,r=n.email,c=n.image,s=n.name;return Object(f.jsxs)("div",{"data-testid":"page-profile",children:[Object(f.jsx)(F,{}),Object(f.jsx)("main",{children:t?Object(f.jsx)(v,{}):Object(f.jsxs)("div",{className:"div-container",children:[Object(f.jsx)("img",{src:c,alt:s,"data-testid":"profile-image"}),Object(f.jsxs)("div",{className:"text-container",children:[Object(f.jsxs)("p",{children:["Nome:",Object(f.jsx)("span",{children:s})]}),Object(f.jsxs)("p",{children:["Email: ",Object(f.jsx)("span",{children:r})]}),Object(f.jsxs)("p",{children:["Descri\xe7\xe3o: ",Object(f.jsx)("span",{children:a})]})]}),Object(f.jsx)(I.a,{to:"/profile/edit",className:"profile-edit",children:"Profile Edit"})]})})]})}}]),n}(a.Component)),ne=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{"data-testid":"page-not-found"})}}]),n}(a.Component),ae=ne,re=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)(j.BrowserRouter,{children:Object(f.jsxs)(j.Switch,{children:[Object(f.jsx)(j.Route,{exact:!0,path:"/trybe-tunes",component:C}),Object(f.jsx)(j.Route,{path:"/search",component:R}),Object(f.jsx)(j.Route,{path:"/album/:id",component:function(e){var t=e.match.params;return Object(f.jsx)(H,Object(i.a)({},t))}}),Object(f.jsx)(j.Route,{path:"/favorites",component:V}),Object(f.jsx)(j.Route,{path:"/profile/edit",render:function(e){return Object(f.jsx)(ee,Object(i.a)({},e))}}),Object(f.jsx)(j.Route,{path:"/profile",component:te}),Object(f.jsx)(j.Route,{path:"/*",component:ae})]})})})}}]),n}(r.a.Component),ce=re;s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(ce,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.1044fe41.chunk.js.map