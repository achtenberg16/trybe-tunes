(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{30:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(22),s=a.n(c),i=(a(30),a(16)),o=a(3),u=a(4),l=a(6),d=a(5),j=a(13),b=a(2),h=a.n(b),m=a(8),p=a(15),f=(a(32),a(0)),O=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"loading",children:Object(f.jsx)("div",{className:"load"})})}}]),a}(n.Component),v=O,x="user",g=function(e){return localStorage.setItem(x,JSON.stringify(e))},k=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},S=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(x));null===t&&(t={}),k(t)(e)}))},N=function(e){return new Promise((function(t){g(Object(i.a)(Object(i.a)({},{name:"",email:"",image:"",description:""}),e)),k("OK")(t)}))},y=function(e){return new Promise((function(t){g(Object(i.a)({},e)),k("OK")(t)}))},w=(a(34),a.p+"static/media/logo.9c05888d.svg"),C=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a,n=t.target,r=n.name,c=n.value,s=c.length<3;e.setState((a={},Object(p.a)(a,r,c),Object(p.a)(a,"iSbuttonDisabled",s),a))},e.fetchCreateUSer=Object(m.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.name,e.setState({messageLoading:!0}),t.next=4,N({name:a});case 4:e.setState({messageLoading:!1,redirectCondition:!0});case 5:case"end":return t.stop()}}),t)}))),e.state={name:"",iSbuttonDisabled:!0,messageLoading:!1,redirectCondition:!1},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.iSbuttonDisabled,n=e.messageLoading,r=e.redirectCondition;return Object(f.jsxs)("div",{"data-testid":"page-login",className:"login-container",children:[r&&Object(f.jsx)(j.Redirect,{to:"/search"}),n?Object(f.jsx)(v,{}):Object(f.jsxs)(f.Fragment,{children:[" ",Object(f.jsx)("img",{src:w,className:"logo-image",alt:"logo.svg"}),Object(f.jsxs)("form",{children:[Object(f.jsxs)("label",{children:["Usu\xe1rio",Object(f.jsx)("input",{type:"text",value:t,name:"name","data-testid":"login-name-input",onChange:this.handleInputChange,placeholder:"Ex pedro",className:"input-user"})]}),Object(f.jsx)("button",{type:"button",disabled:a,onClick:this.fetchCreateUSer,"data-testid":"login-submit-button",className:"login-btn",children:"Entrar"})]})]})]})}}]),a}(n.Component),I=a(14),D=(a(43),a.p+"static/media/headerLogo.806a1a7d.svg"),F=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).findName=Object(m.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,S();case 3:a=t.sent,e.setState({Username:a.name,image:a.image,loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.state={loading:!1,Username:"",image:""},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.findName()}},{key:"render",value:function(){var e=this.state,t=e.Username,a=e.image,n=void 0===a?{}:a;return Object(f.jsxs)("header",{"data-testid":"header-component",children:[Object(f.jsxs)("div",{className:"first-header","data-testid":"header-user-name",children:[Object(f.jsx)("img",{src:D,className:"header-logo",alt:"logo"}),Object(f.jsxs)("div",{className:"container-user",children:[Object(f.jsx)("img",{src:n,className:"img-perfil",alt:""}),t]})]}),Object(f.jsx)("nav",{children:Object(f.jsxs)("ul",{className:"header-link",children:[Object(f.jsx)("li",{children:Object(f.jsxs)(I.a,{to:"/favorites","data-testid":"link-to-favorites",children:[" ","Favorites"]})}),Object(f.jsx)("li",{children:Object(f.jsxs)(I.a,{to:"/search","data-testid":"link-to-search",children:[" ","Search"]})}),Object(f.jsx)("li",{children:Object(f.jsxs)(I.a,{to:"/profile","data-testid":"link-to-profile",children:[" ","Profile"]})})]})})]})}}]),a}(n.Component),U=function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n,r,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=U,R=(a(44),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleInputChange=function(t){var a,n=t.target,r=n.name,c=n.value,s=c.length<2;e.setState((a={},Object(p.a)(a,r,c),Object(p.a)(a,"iSbuttonDisabled",s),Object(p.a)(a,"SearchEnd",!1),a))},e.handleSubmit=Object(m.a)(h.a.mark((function t(){var a,n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.artistName,n=a,e.setState({loading:!0}),t.next=5,P(a);case 5:r=t.sent,e.setState({SearchName:n,SearchEnd:!0,artistName:"",albuns:r,loading:!1});case 7:case"end":return t.stop()}}),t)}))),e.state={artistName:"",iSbuttonDisabled:!0,albuns:[],loading:!1,SearchEnd:!1,SearchName:""},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state,t=e.iSbuttonDisabled,a=e.artistName,n=e.albuns,r=e.loading,c=e.SearchEnd,s=e.SearchName;return Object(f.jsxs)("div",{"data-testid":"page-search",children:[Object(f.jsx)(F,{}),Object(f.jsxs)("div",{className:"search-container",children:[Object(f.jsx)("input",{name:"artistName",type:"text","data-testid":"search-artist-input",value:a,onChange:this.handleInputChange,placeholder:"Digite o nome De um cantor ex: Thiaguinho"}),Object(f.jsx)("button",{"data-testid":"search-artist-button",type:"submit",disabled:t,onClick:this.handleSubmit,children:"Procurar"})]}),Object(f.jsxs)("div",{children:[c&&n.length>0&&Object(f.jsxs)("p",{className:"text-result",children:["Resultado de \xe1lbuns de:"," ",Object(f.jsx)("span",{className:"search-Name",children:s})]}),c&&n.length<1&&Object(f.jsx)("p",{className:"text-result",children:"Nenhum \xe1lbum foi encontrado"}),r?Object(f.jsx)(v,{}):Object(f.jsx)("ul",{className:"album-container",children:n.map((function(e){var t=e.collectionId,a=e.collectionName,n=e.artworkUrl100;return Object(f.jsx)("li",{children:Object(f.jsxs)(I.a,{"data-testid":"link-to-album-".concat(t),to:"/album/".concat(t),children:[Object(f.jsx)("img",{src:n,alt:a}),Object(f.jsx)("p",{className:"album-name",children:a})]})},t)}))})]})]})}}]),a}(n.Component)),M=function(){var e=Object(m.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=M,J=(a(45),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.track,a=t.trackId,n=t.trackName,r=t.previewUrl,c=e.track,s=e.handleFavorite,i=e.favorite;return Object(f.jsxs)("div",{className:"card-container",children:[Object(f.jsx)("span",{children:n}),Object(f.jsxs)("audio",{"data-testid":"audio-component",src:r,controls:!0,children:[Object(f.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(f.jsx)("code",{children:"audio"}),"."]}),Object(f.jsxs)("label",{htmlFor:a,children:[Object(f.jsx)("input",{"data-testid":"checkbox-music-".concat(a),type:"checkbox",id:a,onChange:function(e){var t=e.target.checked;return s(c,t)},checked:i}),"Favorita"]})]})}}]),a}(n.Component)),L=J,T=a(25),A="favorite_songs";JSON.parse(localStorage.getItem(A))||localStorage.setItem(A,JSON.stringify([]));var K=function(){return JSON.parse(localStorage.getItem(A))},B=function(e){return localStorage.setItem(A,JSON.stringify(e))},G=function(e){return function(t){setTimeout((function(){t(e)}),500)}},$=function(){return new Promise((function(e){var t=K();G(t)(e)}))},_=function(e){return new Promise((function(t){if(e){var a=K();B([].concat(Object(T.a)(a),[e]))}G("OK")(t)}))},q=function(e){return new Promise((function(t){var a=K();B(a.filter((function(t){return t.trackId!==e.trackId}))),G("OK")(t)}))},z=(a(46),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleFavorite=function(){var t=Object(m.a)(h.a.mark((function t(a,n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0}),!n){t.next=4;break}return t.next=4,_(a);case 4:if(n){t.next=7;break}return t.next=7,q(a);case 7:return t.next=9,$();case 9:r=t.sent,e.setState({loading:!1,favoritesSongs:r});case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.fetchALbumMusics=Object(m.a)(h.a.mark((function t(){var a,n,r,c,s,i,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.id,t.next=3,E(a);case 3:return n=t.sent,r=n[0],c=r.artistName,s=r.collectionName,i=r.artworkUrl100,t.next=7,$();case 7:o=t.sent,e.setState({songs:n.slice(1),artistName:c,collectionName:s,artworkUrl100:i,favoritesSongs:o});case 9:case"end":return t.stop()}}),t)}))),e.isFavorite=function(t){return e.state.favoritesSongs.some((function(e){return e.trackId===t}))},e.state={songs:[],artistName:"",collectionName:"",artworkUrl100:"",loading:!1,favoritesSongs:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fetchALbumMusics()}},{key:"render",value:function(){var e=this,t=this.state,a=t.artistName,n=t.collectionName,r=t.artworkUrl100,c=t.songs,s=t.loading;return Object(f.jsxs)("div",{"data-testid":"page-album",children:[Object(f.jsx)(F,{}),Object(f.jsx)("main",{className:"album-musics",children:s?Object(f.jsx)(v,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"album-image",children:[Object(f.jsx)("img",{src:r,alt:n}),Object(f.jsx)("p",{"data-testid":"artist-name",children:a}),Object(f.jsx)("p",{"data-testid":"album-name",children:n})]}),Object(f.jsx)("div",{className:"tracks-container",children:c.map((function(t){return Object(f.jsx)(L,{handleFavorite:e.handleFavorite,track:t,favorite:e.isFavorite(t.trackId)},t.trackId)}))})]})})]})}}]),a}(n.Component)),H=z,Q=(a(47),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).getFavoritesMusicsState=Object(m.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,$();case 3:a=t.sent,e.setState({loading:!1,favoritesSongs:a});case 5:case"end":return t.stop()}}),t)}))),e.handleFavorite=function(){var t=Object(m.a)(h.a.mark((function t(a,n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0}),n){t.next=4;break}return t.next=4,q(a);case 4:return t.next=6,$();case 6:r=t.sent,e.setState({loading:!1,favoritesSongs:r});case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.isFavorite=function(t){return e.state.favoritesSongs.some((function(e){return e.trackId===t}))},e.state={favoritesSongs:[],loading:!1},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getFavoritesMusicsState()}},{key:"render",value:function(){var e=this,t=this.state,a=t.favoritesSongs,n=t.loading;return Object(f.jsxs)("div",{"data-testid":"page-favorites",children:[Object(f.jsx)(F,{}),Object(f.jsxs)("main",{children:[Object(f.jsx)("h2",{className:"favorites-title",children:"M\xfasicas favoritas:"}),n&&Object(f.jsx)(v,{}),Object(f.jsx)("div",{className:"card-musics",children:a.map((function(t){return Object(f.jsx)(L,{handleFavorite:e.handleFavorite,track:t,favorite:e.isFavorite(t.trackId)},t.trackId)}))})]})]})}}]),a}(n.Component)),V=Q,W=a(7),X=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.value,n=e.callback,r=e.type,c=e.testid,s=e.dica;return Object(f.jsxs)("label",{htmlFor:t,children:[t,Object(f.jsx)("input",{type:r,name:t,id:t,value:a,"data-testid":c,onChange:n,placeholder:s})]})}}]),a}(n.Component),Y=X,Z=(a(48),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).GetUserStorage=Object(m.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,S();case 3:a=t.sent,e.setState({loading:!1,user:a},(function(){return e.setState({buttonDisabled:e.veryfyInputs()})}));case 5:case"end":return t.stop()}}),t)}))),e.handleInputChange=function(t){var a=t.target,n=e.state.user,r=a.name,c=a.value;n[r]=c;var s=e.veryfyInputs();e.setState({user:n,buttonDisabled:s})},e.onUpdtateClick=function(){var t=Object(m.a)(h.a.mark((function t(a){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.history,a.preventDefault(),r=e.state.user,t.next=5,y(r);case 5:n.push("/profile");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.veryfyInputs=function(){var t=e.state.user,a=t.name,n=t.email,r=0;[a,n,t.description,t.image].every((function(e){return e.length>1}))&&(r+=1),/^\S+@\S+\.\S+$/.test(n)&&(r+=1);return 2!==r},e.state={user:{},loading:!1,buttonDisabled:!0,redirect:!1},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.GetUserStorage()}},{key:"render",value:function(){var e=this.state,t=e.user,a=t.name,n=t.email,r=t.image,c=t.description,s=e.loading,i=e.buttonDisabled,o=e.redirect;return Object(f.jsxs)(f.Fragment,{children:[o&&Object(f.jsx)(W.Redirect,{to:"/profile"}),Object(f.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(f.jsx)(F,{}),Object(f.jsx)("main",{children:s?Object(f.jsx)(v,{}):Object(f.jsxs)("form",{className:"edit-infos",children:[Object(f.jsx)(Y,{name:"name",type:"text",testid:"edit-input-name",value:a,callback:this.handleInputChange,dica:"ex Pedro"}),Object(f.jsx)(Y,{name:"email",type:"text",testid:"edit-input-email",value:n,callback:this.handleInputChange,dica:"ex Pedro@gmail.com"}),Object(f.jsx)(Y,{name:"description",type:"text",testid:"edit-input-description",value:c,callback:this.handleInputChange,dica:"Tenho 25 anos, adoro pagode..."}),Object(f.jsx)(Y,{name:"image",type:"text",testid:"edit-input-image",value:r,callback:this.handleInputChange,dica:"insira uma url de imagem"}),Object(f.jsx)("button",{type:"submit","data-testid":"edit-button-save",disabled:i,onClick:this.onUpdtateClick,children:"Editar perfil"})]})})]})]})}}]),a}(n.Component)),ee=Z,te=(a(49),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).getInfos=Object(m.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.next=3,S();case 3:a=t.sent,e.setState({loading:!1,user:a});case 5:case"end":return t.stop()}}),t)}))),e.state={loading:!1,user:{}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getInfos()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.user,n=a.description,r=a.email,c=a.image,s=a.name;return Object(f.jsxs)("div",{"data-testid":"page-profile",children:[Object(f.jsx)(F,{}),Object(f.jsx)("main",{children:t?Object(f.jsx)(v,{}):Object(f.jsxs)("div",{className:"div-container",children:[Object(f.jsx)("img",{src:c,alt:s,"data-testid":"profile-image"}),Object(f.jsxs)("div",{className:"text-container",children:[Object(f.jsxs)("p",{children:["Nome:",Object(f.jsx)("span",{children:s})]}),Object(f.jsxs)("p",{children:["Email: ",Object(f.jsx)("span",{children:r})]}),Object(f.jsxs)("p",{children:["Descri\xe7\xe3o: ",Object(f.jsx)("span",{children:n})]})]}),Object(f.jsx)(I.a,{to:"/profile/edit",className:"profile-edit",children:"Profile Edit"})]})})]})}}]),a}(n.Component)),ae=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{"data-testid":"page-not-found"})}}]),a}(n.Component),ne=ae,re=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)(j.BrowserRouter,{children:Object(f.jsxs)(j.Switch,{children:[Object(f.jsx)(j.Route,{exact:!0,path:"/",component:C}),Object(f.jsx)(j.Route,{path:"/search",component:R}),Object(f.jsx)(j.Route,{path:"/album/:id",component:function(e){var t=e.match.params;return Object(f.jsx)(H,Object(i.a)({},t))}}),Object(f.jsx)(j.Route,{path:"/favorites",component:V}),Object(f.jsx)(j.Route,{path:"/profile/edit",render:function(e){return Object(f.jsx)(ee,Object(i.a)({},e))}}),Object(f.jsx)(j.Route,{path:"/profile",component:te}),Object(f.jsx)(j.Route,{path:"/*",component:ne})]})})})}}]),a}(r.a.Component),ce=re;s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(ce,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.ca010930.chunk.js.map